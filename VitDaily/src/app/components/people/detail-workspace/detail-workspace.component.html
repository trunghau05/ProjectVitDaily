<div class="popup-overlay"></div>

<div class="workspace-detail-slide">
	<div class="slide-header">
        <input type="text" class="title" [(ngModel)]="workspace.ws_name" name="name" placeholder="Nhập tên không gian" />
		<button class="close-btn"(click)="closeDetail()">
			<mat-icon>close</mat-icon>
		</button>
	</div>

	<div class="workspace-detail-container">
		<form class="workspace-form">
			<div class="form-group">
				<label>Nhãn</label>
				<input type="text" class="form-input" [(ngModel)]="workspace.ws_label" name="label" placeholder="Nhập nhãn (ví dụ: team, project)" />
			</div>

			<div class="form-group">
				<label>Ghi chú</label>
				<textarea class="form-textarea" [(ngModel)]="workspace.ws_note" name="note" placeholder="Nhập ghi chú cho workspace"></textarea>
			</div>

			<div class="form-group">
				<label>Thêm thành viên</label>
				<div style="display:flex; gap:20px; align-items:center;">
					<input type="email" class="form-input add-mem" [(ngModel)]="email" name="memberEmail" placeholder="Nhập email thành viên" />
					<input type="text" class="form-input add-role" [(ngModel)]="role" name="memberRole" placeholder="Vai trò" />
					<button type="button" class="btn-save" (click)="addUserByEmail()">Thêm</button>
				</div>

				<div class="member-list" *ngIf="members.length > 0">
                    <div class="member-scroll">
                        <div class="member-card" *ngFor="let m of members; let i = index" (click)="removeMember(i)">
                            <div class="avatar">
                                <img *ngIf="m.us_img" [src]="m.us_img" alt="avatar" />
                                <span *ngIf="!m.us_img">{{ m.us_name?.[0] | uppercase }}</span>
                            </div>
                            <div class="info">
                                <span class="name">{{ m.us_name }}</span>
                                <span class="role">{{ m.role }}</span>
                            </div>
                        </div>
                    </div>
                </div>
			</div>

			<div class="form-actions" style="margin-top: 0;">
				<button type="button" class="btn-save" (click)="connectWorkspace(workspace.ws_id)">Truy cập</button>
			</div>
            <div class="form-actions" style="margin-top: 0;">
				<button type="button" class="btn-delete" *ngIf="isOwner">Xóa</button>
				<button type="button" class="btn-save" (click)="updateWorkspace()" *ngIf="isOwner">Cập nhật</button>
			</div>
		</form>
	</div>
</div>